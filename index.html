<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JSON ‚ûù X++ DataContract Generator</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, sans-serif;
      background: linear-gradient(-45deg, #667eea, #764ba2, #6dd5ed, #2193b0);
      background-size: 400% 400%;
      animation: gradientBG 12s ease infinite;
      margin: 0;
      padding: 40px;
      color: #333;
    }
    @keyframes gradientBG {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .container {
      max-width: 960px;
      margin: auto;
      background: rgba(255, 255, 255, 0.15);
      padding: 35px;
      border-radius: 20px;
      backdrop-filter: blur(12px);
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.4);
      animation: fadeInUp 0.8s ease;
    }
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h2 {
      text-align: center;
      font-size: 26px;
      font-weight: bold;
      color: #fff;
      margin-bottom: 20px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.5);
    }
    label {
      font-weight: bold;
      margin-top: 10px;
      display: block;
      margin-bottom: 8px;
      color: #fff;
    }
    .json-box {
      position: relative;
    }
    textarea, input {
      width: 100%;
      margin-bottom: 20px;
      padding: 14px;
      font-family: monospace;
      font-size: 14px;
      border: none;
      border-radius: 12px;
      outline: none;
      resize: vertical;
      background: rgba(30,30,30,0.9);
      color: #eee;
      box-shadow: inset 3px 3px 6px rgba(0,0,0,0.4), inset -3px -3px 6px rgba(255,255,255,0.1);
      transition: all 0.3s ease;
    }
    textarea:focus, input:focus {
      box-shadow: 0 0 12px rgba(102,126,234,0.8);
    }
    .beautify-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, #ff9800, #ff5722);
      border: none;
      color: white;
      padding: 6px 14px;
      font-size: 13px;
      border-radius: 8px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }
    .beautify-btn:hover {
      transform: scale(1.08);
    }
    button {
      background: linear-gradient(90deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 14px 22px;
      border-radius: 10px;
      cursor: pointer;
      font-size: 15px;
      font-weight: bold;
      transition: all 0.3s ease;
      display: inline-block;
      margin-top: 10px;
    }
    button:hover {
      transform: translateY(-3px) scale(1.05);
      box-shadow: 0 6px 18px rgba(0,0,0,0.3);
    }
    .output-box {
      position: relative;
      margin-top: 20px;
    }
    .copy-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: linear-gradient(135deg, #28a745, #1e7e34);
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      border-radius: 8px;
      padding: 6px 12px;
      z-index: 10; /* ensures button stays above */
    }
    pre {
      background: #0d0d0d;
      color: #f8f8f2;
      padding: 20px;
      border-radius: 12px;
      min-height: 250px;
      max-height: 400px;   /* adds vertical scrolling */
      overflow-y: auto;
      overflow-x: auto;
      font-size: 14px;
      box-shadow: inset 2px 2px 6px rgba(0,0,0,0.6), inset -2px -2px 6px rgba(255,255,255,0.05);
      transition: all 0.4s ease;
    }
    pre:hover {
      box-shadow: 0 0 20px rgba(102,126,234,0.8);
      transform: scale(1.01);
    }
    .toast {
      visibility: hidden;
      min-width: 220px;
      background: #28a745;
      color: white;
      text-align: center;
      border-radius: 8px;
      padding: 12px;
      position: fixed;
      z-index: 1000;
      bottom: 30px;
      right: 30px;
      font-size: 14px;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.5s ease;
    }
    .toast.show {
      visibility: visible;
      opacity: 1;
      transform: translateY(0);
    }
    footer {
      text-align: center;
      margin-top: 30px;
      font-size: 14px;
      color: #fff;
      text-shadow: 0 1px 4px rgba(0,0,0,0.6);
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>‚ö° JSON ‚ûù X++ DataContract Generator</h2>

    <label for="jsonInput">Paste JSON:</label>
    <div class="json-box">
      <textarea id="jsonInput" rows="8" placeholder='{
  "Key1": "Value1",
  "Key2": 10.5,
  "Key3": 12,
  "Key4": ["ABC","DEF"]
}'></textarea>
      <button class="beautify-btn" onclick="beautifyJSON()">‚ú® Beautify</button>
    </div>

    <label for="className">Class Name:</label>
    <input type="text" id="className" placeholder="Enter Class Name (e.g., AcxTestReqDC)" />

    <button onclick="generateClass()">üöÄ Generate Class</button>

    <h3 style="color:#fff; margin-top:25px;">Generated Class:</h3>
    <div class="output-box">
      <button class="copy-btn" onclick="copyCode()">üìã Copy</button>
      <pre id="output"></pre>
    </div>
  </div>

  <div id="toast" class="toast">‚úÖ Code copied to clipboard!</div>

  <footer>
    ¬© Developed by <b>Er. Aryan Singh</b>
  </footer>

<script>
function beautifyJSON() {
  let textarea = document.getElementById("jsonInput");
  try {
    let json = JSON.parse(textarea.value);
    textarea.value = JSON.stringify(json, null, 2);
  } catch (e) {
    alert("‚ùå Invalid JSON! Please check before beautifying.");
  }
}

function detectType(value, rawValue) {
  if (typeof value === "string") {
    return "str";
  } else if (typeof value === "number") {
    if (rawValue.includes(".")) {
      return "real";
    }
    return Number.isInteger(value) ? "int" : "real";
  } else if (typeof value === "boolean") {
    return "boolean";
  } else if (Array.isArray(value)) {
    return "List";
  } else if (typeof value === "object" && value !== null) {
    return "class";
  }
  return "str";
}

function generateClass() {
  let jsonText = document.getElementById("jsonInput").value;
  let className = document.getElementById("className").value || "GeneratedContract";
  let output = document.getElementById("output");

  try {
    let obj = JSON.parse(jsonText);
    let fields = Object.keys(obj);

    let classCode = `[DataContract('${className}')]\nclass ${className}\n{\n`;

    fields.forEach(f => {
      let rawMatch = jsonText.match(new RegExp(`"${f}"\\s*:\\s*([^,}\\n]+)`));
      let rawValue = rawMatch ? rawMatch[1] : "";
      let type = detectType(obj[f], rawValue);
      classCode += `    ${type} ${f};\n`;
    });

    classCode += `\n    // --- parm methods ---\n\n`;

    fields.forEach(f => {
      let rawMatch = jsonText.match(new RegExp(`"${f}"\\s*:\\s*([^,}\\n]+)`));
      let rawValue = rawMatch ? rawMatch[1] : "";
      let type = detectType(obj[f], rawValue);
      let methodName = "parm" + f.charAt(0).toUpperCase() + f.slice(1);

      classCode += `    [DataMemberAttribute("${f}")]\n`;
      classCode += `    public ${type} ${methodName}(${type} _${f} = ${f})\n    {\n`;
      classCode += `        ${f} = _${f};\n`;
      classCode += `        return ${f};\n    }\n\n`;
    });

    classCode += `}`;
    output.textContent = classCode;
  } catch (e) {
    output.textContent = "‚ùå Invalid JSON! Please check your input.";
  }
}

function copyCode() {
  let output = document.getElementById("output").textContent;
  if (!output.trim()) {
    alert("‚ö†Ô∏è No code to copy!");
    return;
  }
  navigator.clipboard.writeText(output).then(() => {
    let toast = document.getElementById("toast");
    toast.classList.add("show");
    setTimeout(() => { toast.classList.remove("show"); }, 2500);
  });
}
</script>
</body>
</html>
